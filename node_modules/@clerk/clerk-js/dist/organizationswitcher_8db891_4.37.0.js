"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[336],{3214:function(e,i,r){r.r(i),r.d(i,{OrganizationSwitcher:function(){return f}});var o=r(2903),t=r(8147),n=r(8173),a=r(6839),c=r(7756),s=r(6046),l=r(2784),g=r(3173),p=r(3244),d=r(2162),z=r(3736),u=r(9820);const h=e=>{const{onCreateOrganizationClick:i,onPersonalWorkspaceClick:r,onOrganizationClick:t}=e,{organizationList:s}=(0,n.useCoreOrganizationList)(),{organization:l}=(0,n.useCoreOrganization)(),g=(0,n.useCoreUser)(),{hidePersonal:p}=(0,n.useOrganizationSwitcherContext)(),z=(s||[]).map((e=>e.organization)).filter((e=>e.id!==(null==l?void 0:l.id))),h=(0,o.tZ)(c.Action,{elementDescriptor:a.descriptors.organizationSwitcherPopoverActionButton,elementId:a.descriptors.organizationSwitcherPopoverActionButton.setId("createOrganization"),iconBoxElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.organizationSwitcherPopoverActionButtonIconBox.setId("createOrganization"),iconElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIcon,iconElementId:a.descriptors.organizationSwitcherPopoverActionButtonIcon.setId("createOrganization"),textElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonText,textElementId:a.descriptors.organizationSwitcherPopoverActionButtonText.setId("createOrganization"),icon:d.v3,label:(0,a.localizationKeys)("organizationSwitcher.action__createOrganization"),onClick:i});return(0,o.BX)(c.SecondaryActions,{elementDescriptor:a.descriptors.organizationSwitcherPopoverActions,children:[(0,o.BX)(a.Box,{sx:e=>({maxHeight:`calc(4 * ${e.sizes.$12})`,overflowY:"auto",...u.common.unstyledScrollbar(e)}),children:[l&&!p&&(0,o.tZ)(c.PreviewButton,{elementDescriptor:a.descriptors.organizationSwitcherPreviewButton,icon:d.oX,sx:{borderRadius:0},onClick:r,children:(0,o.tZ)(c.PersonalWorkspacePreview,{user:{profileImageUrl:g.profileImageUrl},size:"sm",avatarSx:e=>({margin:`0 calc(${e.space.$3}/2)`}),title:(0,a.localizationKeys)("organizationSwitcher.personalWorkspace")})}),z.map((e=>(0,o.tZ)(c.PreviewButton,{elementDescriptor:a.descriptors.organizationSwitcherPreviewButton,icon:d.oX,sx:{borderRadius:0},onClick:()=>t(e),children:(0,o.tZ)(c.OrganizationPreview,{elementId:"organizationSwitcher",avatarSx:e=>({margin:`0 calc(${e.space.$3}/2)`}),organization:e,size:"sm"})},e.id)))]}),h]})},m=l.forwardRef(((e,i)=>{const{close:r,...t}=e,s=(0,c.useCardState)(),{openOrganizationProfile:l,openCreateOrganization:u}=(0,n.useCoreClerk)(),{organization:m}=(0,n.useCoreOrganization)(),{isLoaded:v,setActive:w}=(0,n.useCoreOrganizationList)(),f=(0,z.useRouter)(),{hidePersonal:P,__unstable_manageBillingUrl:S,__unstable_manageBillingLabel:C,__unstable_manageBillingMembersLimit:O,createOrganizationMode:B,organizationProfileMode:_,afterLeaveOrganizationUrl:k,afterCreateOrganizationUrl:x,navigateCreateOrganization:b,navigateOrganizationProfile:I,navigateAfterSwitchOrganization:A}=(0,n.useOrganizationSwitcherContext)(),Z=(0,n.useCoreUser)();if(!v)return null;const U=(0,o.tZ)(c.Action,{icon:d.tc,label:(0,a.localizationKeys)("organizationSwitcher.action__manageOrganization"),onClick:()=>{if(r(),"navigation"===_)return I();l({afterLeaveOrganizationUrl:k,__unstable_manageBillingUrl:S,__unstable_manageBillingLabel:C,__unstable_manageBillingMembersLimit:O})}}),$=(0,o.tZ)(c.Action,{icon:d.Nj,label:(0,g.OR)(C)||"Manage billing",onClick:()=>f.navigate((0,g.OR)(S))});return(0,o.tZ)(p.r,{elementDescriptor:a.descriptors.organizationSwitcherPopoverRootBox,children:(0,o.BX)(c.PopoverCard.Root,{elementDescriptor:a.descriptors.organizationSwitcherPopoverCard,ref:i,...t,children:[(0,o.BX)(c.PopoverCard.Main,{elementDescriptor:a.descriptors.organizationSwitcherPopoverMain,children:[m?(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.OrganizationPreview,{elementId:"organizationSwitcher",gap:4,organization:m,user:Z,sx:e=>i=>({padding:`0 ${e.space.$6}`,marginBottom:i.space.$2})}),(0,o.BX)(c.Actions,{children:[U,S&&$]})]}):!P&&(0,o.tZ)(c.PersonalWorkspacePreview,{gap:4,user:{profileImageUrl:Z.profileImageUrl},sx:e=>({padding:`0 ${e.space.$6}`,marginBottom:e.space.$6}),title:(0,a.localizationKeys)("organizationSwitcher.personalWorkspace")}),(0,o.tZ)(h,{onCreateOrganizationClick:()=>{if(r(),"navigation"===B)return b();u({afterCreateOrganizationUrl:x})},onPersonalWorkspaceClick:()=>s.runAsync((()=>w({organization:null,beforeEmit:A}))).then(r),onOrganizationClick:e=>s.runAsync((()=>w({organization:e,beforeEmit:A}))).then(r)})]}),(0,o.tZ)(c.PopoverCard.Footer,{elementDescriptor:a.descriptors.organizationSwitcherPopoverFooter})]})})})),v=l.forwardRef(((e,i)=>{const r=(0,n.useCoreUser)(),{organization:t}=(0,n.useCoreOrganization)(),{hidePersonal:s}=(0,n.useOrganizationSwitcherContext)();return(0,o.BX)(a.Button,{elementDescriptor:a.descriptors.organizationSwitcherTrigger,variant:"ghost",colorScheme:"neutral",sx:e=>({minHeight:0,padding:`0 ${e.space.$2} 0 0`}),...e,ref:i,children:[t&&(0,o.tZ)(c.OrganizationPreview,{elementId:"organizationSwitcher",gap:3,size:"sm",organization:t,sx:{maxWidth:"30ch"}}),!t&&(0,o.tZ)(c.PersonalWorkspacePreview,{size:"sm",gap:3,user:{profileImageUrl:r.profileImageUrl},title:s?(0,a.localizationKeys)("organizationSwitcher.notSelected"):(0,a.localizationKeys)("organizationSwitcher.personalWorkspace")}),(0,o.tZ)(a.Icon,{elementDescriptor:a.descriptors.organizationSwitcherTriggerIcon,icon:d.Qf,sx:e=>({opacity:e.opacity.$sm,marginLeft:`${e.space.$2}`})})]})})),w=(0,c.withFloatingTree)((()=>{const{floating:e,reference:i,styles:r,toggle:t,isOpen:n,nodeId:l,context:g}=(0,s.Sv)({placement:"bottom-start",offset:8});return(0,o.BX)(a.Flow.Root,{flow:"organizationSwitcher",children:[(0,o.tZ)(v,{ref:i,onClick:t,isOpen:n}),(0,o.tZ)(c.Popover,{nodeId:l,context:g,isOpen:n,children:(0,o.tZ)(m,{close:t,ref:e,style:{...r}})})]})})),f=(0,t.pK)((0,n.withCoreUserGuard)((0,c.withCardStateProvider)(w)),"OrganizationSwitcher",{mode:"hide"})},4781:function(e,i,r){r.d(i,{v:function(){return o}});const o=({signUp:e,verifyEmailPath:i,verifyPhonePath:r,navigate:o,handleComplete:t})=>{var n,a;if("complete"===e.status)return t&&t();if("missing_requirements"===e.status){if((null===(n=e.unverifiedFields)||void 0===n?void 0:n.includes("email_address"))&&i)return o(i);if((null===(a=e.unverifiedFields)||void 0===a?void 0:a.includes("phone_number"))&&r)return o(r)}}}}]);