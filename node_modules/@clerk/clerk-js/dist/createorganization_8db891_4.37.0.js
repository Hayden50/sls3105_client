"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[979],{3555:function(e,t,i){i.r(t),i.d(t,{CreateOrganization:function(){return p},CreateOrganizationModal:function(){return z}});var n=i(2903),a=i(8147),o=i(8173),r=i(6839),l=i(7756),s=i(3736),c=i(2784),u=i(2162),d=i(2729),g=i(4095),m=i(2848),h=i(6884);const v=(0,l.withCardStateProvider)((()=>{const e=(0,r.localizationKeys)("createOrganization.title"),t=(0,r.localizationKeys)("organizationProfile.invitePage.title"),i=(0,l.useCardState)(),[s,v]=c.useState(),{createOrganization:f}=(0,o.useCoreOrganizations)(),{setActive:p,closeCreateOrganization:z}=(0,o.useCoreClerk)(),{mode:b,navigateAfterCreateOrganization:_}=(0,o.useCreateOrganizationContext)(),{organization:C}=(0,o.useCoreOrganization)(),Z=(0,a.a2)({onNextStep:()=>i.setError(void 0)}),B=(0,d.Yp)("name","",{type:"text",label:(0,r.localizationKeys)("formFieldLabel__organizationName"),placeholder:(0,r.localizationKeys)("formFieldInputPlaceholder__organizationName")}),x=(0,d.Yp)("slug","",{type:"text",label:(0,r.localizationKeys)("formFieldLabel__organizationSlug"),placeholder:(0,r.localizationKeys)("formFieldInputPlaceholder__organizationSlug")}),P=!!B.value||!!s,S=()=>{_(),"modal"===b&&z()},F=e=>{x.setValue(e)};return(0,n.BX)(a.en,{...Z.props,children:[(0,n.tZ)(l.ContentPage,{Breadcrumbs:null,headerTitle:e,sx:e=>({minHeight:e.sizes.$60}),children:(0,n.BX)(l.Form.Root,{onSubmit:async e=>{if(e.preventDefault(),P)return null==f?void 0:f({name:B.value,slug:x.value}).then((e=>s?e.setLogo({file:s}):e)).then((e=>p({organization:e}))).then(Z.nextStep).catch((e=>(0,d.S3)(e,[B,x],i.setError)))},children:[(0,n.tZ)(h.D,{organization:{name:B.value},onAvatarChange:async e=>await v(e),onAvatarRemove:s?()=>(i.setIdle(),v(null)):null}),(0,n.tZ)(l.Form.ControlRow,{elementId:B.id,children:(0,n.tZ)(l.Form.Control,{sx:{flexBasis:"80%"},autoFocus:!0,...B.props,onChange:e=>{B.setValue(e.target.value),F((0,d.qi)(e.target.value))},required:!0})}),(0,n.tZ)(l.Form.ControlRow,{elementId:x.id,children:(0,n.tZ)(l.Form.Control,{sx:{flexBasis:"80%"},...x.props,onChange:e=>{F(e.target.value)},icon:u.Zc,required:!0})}),(0,n.BX)(l.FormButtonContainer,{children:[(0,n.tZ)(l.Form.SubmitButton,{block:!1,isDisabled:!P,localizationKey:(0,r.localizationKeys)("createOrganization.formButtonSubmit")}),"modal"===b&&(0,n.tZ)(l.Form.ResetButton,{localizationKey:(0,r.localizationKeys)("userProfile.formButtonReset"),block:!1,onClick:z})]})]})}),(0,n.tZ)(l.ContentPage,{Breadcrumbs:null,headerTitle:t,sx:e=>({minHeight:e.sizes.$60}),children:C&&(0,n.tZ)(g.l,{organization:C,resetButtonLabel:(0,r.localizationKeys)("createOrganization.invitePage.formButtonReset"),onSuccess:Z.nextStep,onReset:S})}),(0,n.tZ)(l.SuccessPage,{title:e,content:(0,n.tZ)(m.a,{}),sx:e=>({minHeight:e.sizes.$60}),onFinish:S})]})})),f=(0,o.withCoreUserGuard)((()=>(0,n.tZ)(l.ProfileCard,{sx:e=>({width:e.sizes.$120}),children:(0,n.tZ)(l.ProfileCardContent,{children:(0,n.tZ)(v,{})})}))),p=(0,a.pK)((0,l.withCardStateProvider)((()=>(0,n.tZ)(r.Flow.Root,{flow:"createOrganization",children:(0,n.tZ)(r.Flow.Part,{children:(0,n.tZ)(s.Switch,{children:(0,n.tZ)(s.Route,{children:(0,n.tZ)(f,{})})})})}))),"CreateOrganization",{mode:"redirect"}),z=e=>{const t={...e,routing:"virtual",componentName:"CreateOrganization",mode:"modal"};return(0,n.tZ)(s.Route,{path:"createOrganization",children:(0,n.tZ)(o.ComponentContext.Provider,{value:t,children:(0,n.tZ)("div",{children:(0,n.tZ)(p,{})})})})}},4095:function(e,t,i){i.d(t,{l:function(){return g}});var n=i(2903),a=i(2784),o=i(6426),r=i(6839),l=i(7756),s=i(6046),c=i(4334),u=i(2729);const d=e=>/^\S+@\S+\.\S+$/.test(e),g=e=>{var t,i;const{navigate:g}=(0,s.s0)(),{onSuccess:m,onReset:h=(()=>g("..")),resetButtonLabel:v,organization:f}=e,p=(0,l.useCardState)(),{t:z}=(0,c.zJ)(),[b,_]=a.useState([]);if(!f)return null;const C=[{label:z((0,u.JD)("admin")),value:"admin"},{label:z((0,u.JD)("basic_member")),value:"basic_member"}],Z=(0,u.Yp)("emailAddress","",{type:"text",label:(0,c.u1)("formFieldLabel__emailAddresses"),placeholder:(0,c.u1)("formFieldInputPlaceholder__emailAddresses")}),{props:{errorText:B,...x}}=Z,P=(0,u.Yp)("role","basic_member",{options:C,label:"Role",placeholder:""});a.useEffect((()=>{if(b.length){const e=new Set(b),t=Z.value.split(",");Z.setValue(t.filter((t=>!e.has(t))).join(","))}}),[b]);const S=!!Z.value.length;return(0,n.BX)(n.HY,{children:[!!b.length&&(0,n.tZ)(l.Alert,{variant:"danger",align:"start",title:(0,c.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed"),subtitle:b.join(", "),sx:{border:0}}),(0,n.BX)(l.Form.Root,{onSubmit:async e=>(e.preventDefault(),f.inviteMembers({emailAddresses:Z.value.split(","),role:P.value}).then(m).catch((e=>{var t;if(e instanceof o.gO){const i=(null===(t=e.errors[0].meta)||void 0===t?void 0:t.emailAddresses)||[];i.length?_(i):(_([]),(0,u.S3)(e,[],p.setError))}}))),children:[(0,n.tZ)(l.Form.ControlRow,{elementId:Z.id,children:(0,n.BX)(r.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,n.tZ)(r.Text,{localizationKey:(0,c.u1)("formFieldLabel__emailAddresses")}),(0,n.tZ)(l.TagInput,{...x,autoFocus:!0,validate:d,sx:{width:"100%"}})]})}),(0,n.tZ)(l.Form.ControlRow,{elementId:P.id,children:(0,n.BX)(r.Flex,{direction:"col",gap:2,children:[(0,n.tZ)(r.Text,{localizationKey:(0,c.u1)("formFieldLabel__role")}),(0,n.BX)(l.Select,{...P.props,onChange:e=>P.setValue(e.value),children:[(0,n.tZ)(l.SelectButton,{sx:e=>({width:e.sizes.$48,justifyContent:"space-between",display:"flex"}),children:null===(i=null===(t=P.props.options)||void 0===t?void 0:t.find((e=>e.value===P.value)))||void 0===i?void 0:i.label}),(0,n.tZ)(l.SelectOptionList,{sx:e=>({minWidth:e.sizes.$48})})]})]})}),(0,n.BX)(l.FormButtonContainer,{children:[(0,n.tZ)(l.Form.SubmitButton,{block:!1,isDisabled:!S,localizationKey:(0,c.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,n.tZ)(l.Form.ResetButton,{localizationKey:v||(0,c.u1)("userProfile.formButtonReset"),block:!1,onClick:h})]})]})]})}},2848:function(e,t,i){i.d(t,{a:function(){return v},F:function(){return h}});var n=i(2903),a=i(3173),o=i(8147),r=i(8173),l=i(6839),s=i(7756),c=i(2162),u=i(3736);const d=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{const i=(0,u.useRouter)();return(0,n.BX)(l.Flex,{sx:e=>({background:e.colors.$blackAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,n.tZ)(l.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,n.BX)(l.Text,{variant:"regularRegular",sx:e=>({fontWeight:e.fontWeights.$normal,lineHeight:e.lineHeights.$tall}),children:["This organization is limited to ",(0,a.OR)(t)," members.",(0,n.tZ)("br",{}),(0,n.tZ)(l.Link,{variant:"regularRegular",sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>i.navigate((0,a.OR)(e)),children:"Upgrade for unlimited members"})]})]})};var g=i(4095),m=i(2609);const h=(0,s.withCardStateProvider)((()=>{const e=(0,l.localizationKeys)("organizationProfile.invitePage.title"),t=(0,l.localizationKeys)("organizationProfile.invitePage.subtitle"),i=(0,s.useCardState)(),c=(0,o.a2)({onNextStep:()=>i.setError(void 0)}),{organization:u}=(0,r.useCoreOrganization)(),{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:f}=(0,r.useOrganizationProfileContext)();if(!u)return null;const p=!!f&&(0,a.OR)(f)<=u.pendingInvitationsCount+u.membersCount;return(0,n.BX)(o.en,{...c.props,children:[(0,n.BX)(s.ContentPage,{headerTitle:e,headerSubtitle:t,Breadcrumbs:m.G,children:[p&&h&&(0,n.tZ)(d,{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:f}),(0,n.tZ)(g.l,{organization:u,onSuccess:c.nextStep})]}),(0,n.tZ)(s.SuccessPage,{title:e,content:(0,n.tZ)(v,{}),Breadcrumbs:m.G})]})})),v=()=>(0,n.BX)(l.Flex,{direction:"col",center:!0,gap:4,children:[(0,n.tZ)(s.IconCircle,{boxElementDescriptor:l.descriptors.invitationsSentIconBox,iconElementDescriptor:l.descriptors.invitationsSentIcon,icon:c.GT}),(0,n.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},6884:function(e,t,i){i.d(t,{D:function(){return r}});var n=i(2903),a=i(7756),o=i(4334);const r=e=>{const{organization:t,...i}=e;return(0,n.tZ)(a.AvatarUploader,{...i,title:(0,o.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,n.tZ)(a.OrganizationAvatar,{size:e=>e.sizes.$11,optimize:!0,...t})})}},2609:function(e,t,i){i.d(t,{G:function(){return d},M:function(){return c}});var n=i(2903),a=(i(2784),i(8173)),o=i(7756),r=i(2162),l=i(4334);const s=[{name:(0,l.u1)("organizationProfile.start.headerTitle__members"),id:"members",icon:r.n5,path:"/"},{name:(0,l.u1)("organizationProfile.start.headerTitle__settings"),id:"settings",icon:r.tc,path:"organization-settings"}],c=e=>{const{organization:t}=(0,a.useCoreOrganization)();return t?(0,n.BX)(o.NavbarContextProvider,{children:[(0,n.tZ)(o.NavBar,{header:(0,n.tZ)(o.OrganizationPreview,{size:"sm",organization:t,sx:e=>({margin:`0 0 ${e.space.$4} ${e.space.$2}`})}),routes:s,contentRef:e.contentRef}),e.children]}):null},u={"invite-members":s.find((e=>"members"===e.id)),profile:s.find((e=>"settings"===e.id)),leave:s.find((e=>"settings"===e.id))},d=e=>(0,n.tZ)(o.Breadcrumbs,{...e,pageToRootNavbarRoute:u})},4781:function(e,t,i){i.d(t,{v:function(){return n}});const n=({signUp:e,verifyEmailPath:t,verifyPhonePath:i,navigate:n,handleComplete:a})=>{var o,r;if("complete"===e.status)return a&&a();if("missing_requirements"===e.status){if((null===(o=e.unverifiedFields)||void 0===o?void 0:o.includes("email_address"))&&t)return n(t);if((null===(r=e.unverifiedFields)||void 0===r?void 0:r.includes("phone_number"))&&i)return n(i)}}}}]);